# databricks.yml (VERSÃO FINAL PARA FREE TRIAL COM DLT E BUNDLES)
bundle:
  name: databricks_hotel_etl

workspace:
  host: https://dbc-03ce1db1-207c.cloud.databricks.com

# O Bundle irá incluir automaticamente os ficheiros referenciados nos resources.

resources:
  pipelines: # <-- MUDANÇA PRINCIPAL: de 'jobs' para 'pipelines'
    # Nome do nosso recurso de pipeline
    dlt_hotel_pipeline:
      # Nome que aparecerá na interface do Databricks
      name: "DLT - Pipeline de ETL da Hotelaria"

      # Onde o pipeline irá guardar as suas tabelas
      target: "production.raw" # <-- O nosso schema da camada Raw

      # Indica que este é um pipeline de notebooks
      libraries:
        - notebook:
            # Caminho para o ficheiro que contém a lógica do pipeline
            path: "/Workspace${workspace.root_path}/src/02_transient_to_raw/dlt_raw_pipeline.py"
      
      # Configurações do pipeline
      development: true # Modo de desenvolvimento para iterações mais rápidas
      continuous: false # Executar apenas uma vez quando acionado (modo batch)

targets:
  dev:
    mode: development
    workspace:
      root_path: /Users/${workspace.current_user.userName}/.bundle/${bundle.name}/dev