# databricks.yml (VERSÃO FINAL COM ARQUITETURA MEDALLION CORRETA)
bundle:
  name: databricks_hotel_etl

workspace:
  host: https://dbc-03ce1db1-207c.cloud.databricks.com

sync:
  include:
    - "src/**/*"

resources:
  pipelines:
    # --- PIPELINE 1: TRANSIENT -> RAW ---
    dlt_raw_pipeline:
      name: "DLT - 1. Pipeline Transient para Raw"
      catalog: "production"
      target: "raw" # <-- O destino deste pipeline é o schema RAW.
      serverless: true
      libraries:
        - notebook:
            path: "src/dlt_pipelines/dlt_raw_pipeline.py"
      development: true
      continuous: false

    # --- PIPELINE 2: RAW -> TRUSTED ---
    dlt_trusted_pipeline:
      name: "DLT - 2. Pipeline Raw para Trusted"
      catalog: "production"
      target: "trusted" # <-- O destino deste pipeline é o schema TRUSTED.
      serverless: true
      libraries:
        - notebook:
            path: "src/dlt_pipelines/dlt_trusted_pipeline.py"
      # Adicionamos uma dependência para garantir que ele espere pelo pipeline Raw
      depends_on:
        - "pipelines.dlt_raw_pipeline"
      development: true
      continuous: false

targets:
  dev:
    default: true