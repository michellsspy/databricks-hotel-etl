# databricks.yml (VERSÃO FINAL COM TODAS AS CAMADAS MEDALLION)
bundle:
  name: databricks_hotel_etl

workspace:
  host: https://dbc-03ce1db1-207c.cloud.databricks.com

sync:
  include:
    - "src/**/*"

resources:
  pipelines:
    # --- PIPELINE 1: TRANSIENT -> RAW ---
    dlt_raw_pipeline:
      name: "DLT - 1. Pipeline Transient para Raw"
      catalog: "production"
      target: "raw"
      serverless: true
      libraries:
        - notebook:
            path: "src/dlt_pipelines/dlt_raw_pipeline.py"
      development: true
      continuous: false

    # --- PIPELINE 2: RAW -> TRUSTED ---
    dlt_trusted_pipeline:
      name: "DLT - 2. Pipeline Raw para Trusted"
      catalog: "production"
      target: "trusted"
      serverless: true
      libraries:
        - notebook:
            path: "src/dlt_pipelines/dlt_trusted_pipeline.py"
      development: true
      continuous: false

    # --- PIPELINE 3: TRUSTED -> REFINED ---
    dlt_refined_pipeline:
      name: "DLT - 3. Pipeline Trusted para Refined (Star Schema)"
      catalog: "production"
      target: "refined" # <-- O destino deste pipeline é o schema REFINED.
      serverless: true
      libraries:
        - notebook:
            path: "src/dlt_pipelines/dlt_refined_pipeline.py"
      development: true
      continuous: false

targets:
  dev:
    default: true